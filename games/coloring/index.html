<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
    <meta name="theme-color" content="#0ea5e9" />
    <title>Coloring Time ‚Ä¢ Gordon Game Hub</title>
    <link rel="stylesheet" href="../../css/styles.css" />
    <style>
      /* Toddler-friendly coloring: full-screen, big buttons */
      body{ overflow:auto; }
      .gameShell{ min-height: 100vh; padding: 14px; display:flex; flex-direction:column; gap: 10px; }
      .topRow{ display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap; }
      .title{ font-family:"Fredoka", ui-rounded, system-ui; font-weight: 900; font-size: clamp(28px, 4.5vw, 44px); color:#06233b; margin:0; }
      .hud{ display:flex; align-items:center; gap:10px; flex-wrap:wrap; font-weight: 900; }

      .workspace{
        flex: 1;
        background: rgba(255,255,255,0.86);
        border:2px solid rgba(255,255,255,0.65);
        border-radius: 26px;
        box-shadow: 0 18px 46px rgba(0,0,0,0.16);
        backdrop-filter: blur(8px);
        padding: 12px;
        display: grid;
        grid-template-columns: 1fr;
        grid-template-rows: auto 1fr;
        gap: 12px;
        min-height: 0;
      }

      @media (min-width: 860px){
        .workspace{
          grid-template-columns: 180px 1fr;
          grid-template-rows: 1fr;
        }
        .templatePicker{ grid-column: 1; grid-row: 1; }
        .mainArea{ grid-column: 2; grid-row: 1; }
      }

      /* Template picker panel */
      .templatePicker{
        border-radius: 22px;
        background: rgba(255,255,255,0.78);
        border: 2px solid rgba(255,255,255,0.55);
        padding: 10px;
        display: flex;
        flex-direction: column;
        gap: 8px;
        min-height: 0;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
      }

      .pickerTitle{
        font-family: "Fredoka", ui-rounded, system-ui;
        font-weight: 900;
        font-size: clamp(18px, 2.5vw, 24px);
        opacity: 0.8;
        text-align: center;
        flex-shrink: 0;
      }

      .thumbGrid{
        display: flex;
        flex-direction: row;
        gap: 8px;
        overflow-x: auto;
        overflow-y: hidden;
        -webkit-overflow-scrolling: touch;
        flex: none;
        padding-bottom: 4px;
      }

      @media (min-width: 860px){
        .thumbGrid{
          flex-direction: column;
          overflow-x: hidden;
          overflow-y: auto;
          flex: 1;
          min-height: 0;
          padding-bottom: 0;
        }
      }

      .thumbBtn{
        appearance: none;
        border: 3px solid rgba(14,165,233,0.20);
        border-radius: 14px;
        background: #ffffff;
        padding: 4px;
        cursor: pointer;
        flex-shrink: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 2px;
        transition: transform 120ms ease;
      }
      .thumbBtn:active{ transform: scale(0.95); }
      .thumbBtn.selected{
        outline: 6px solid rgba(14,165,233,0.35);
        border-color: rgba(14,165,233,0.45);
      }
      .thumbBtn canvas{
        width: 120px;
        height: 80px;
        display: block;
        border-radius: 8px;
        pointer-events: none;
      }
      @media (max-width: 859px){
        .thumbBtn canvas{ width: 100px; height: 68px; }
      }
      .thumbLabel{
        font-family: "Fredoka", ui-rounded, system-ui;
        font-weight: 800;
        font-size: 13px;
        color: #06233b;
        opacity: 0.75;
      }

      /* Main area (controls + canvas + hint) */
      .mainArea{
        display: flex;
        flex-direction: column;
        gap: 12px;
        min-height: 0;
        flex: 1;
      }

      .controls{
        display:flex;
        gap: 10px;
        flex-wrap:wrap;
        align-items:center;
        justify-content:space-between;
      }

      .palette{
        display:flex;
        gap:10px;
        flex-wrap:wrap;
        align-items:center;
      }

      .colorBtn{
        width: 48px;
        height: 48px;
        border-radius: 16px;
        border: 3px solid rgba(255,255,255,0.9);
        box-shadow: 0 10px 20px rgba(0,0,0,0.14);
        cursor: pointer;
        padding: 0;
      }
      .colorBtn.selected{ outline: 6px solid rgba(14,165,233,0.35); }

      .toolRow{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
      .toolBtn{
        width: 68px;
        height: 68px;
        padding: 0;
        border-radius: 22px;
        display: grid;
        place-items: center;
        font-size: 36px;
        line-height: 1;
      }
      #eraserBtn{ width: 68px; height: 68px; padding: 0; border-radius: 22px; font-size: 36px; line-height: 1; display:grid; place-items:center; }

      .sliderWrap{ display:flex; gap: 10px; align-items:center; font-weight:900; }
      input[type="range"]{ width: 180px; }

      .canvasWrap{
        flex: 1;
        min-height: 0;
        border-radius: 22px;
        background: rgba(255,255,255,0.92);
        border: 2px solid rgba(14,165,233,0.20);
        box-shadow: inset 0 0 0 1px rgba(255,255,255,0.6);
        overflow:hidden;
        position: relative;
      }

      canvas#c{ width: 100%; height: 100%; display:block; touch-action: none; }

      .hint{ text-align:center; font-weight:900; opacity:0.75; font-size: clamp(18px, 2.5vw, 24px); margin:0; font-family:"Fredoka", ui-rounded, system-ui; }

      .confetti{ display:none; }
    </style>
  </head>
  <body>
    <div class="clouds" aria-hidden="true"></div>

    <div class="gameShell">
      <div class="topRow">
        <h1 class="title">Coloring Time</h1>
        <div class="hud">
          <a class="btn hubBtn" href="../../index.html">‚Üê Back to Hub</a>
          <button class="btn secondary iconBtn" id="musicToggle" type="button" aria-label="Music" title="Music"></button>
        </div>
      </div>

      <div class="workspace" aria-label="Coloring game">
        <div class="templatePicker" aria-label="Pick a picture to color">
          <div class="pickerTitle">Pick a picture</div>
          <div class="thumbGrid" id="thumbGrid"></div>
        </div>

        <div class="mainArea">
          <div class="controls">
            <div class="palette" aria-label="Color palette">
              <button class="colorBtn" data-color="#ef4444" style="background:#ef4444" aria-label="Red"></button>
              <button class="colorBtn" data-color="#f97316" style="background:#f97316" aria-label="Orange"></button>
              <button class="colorBtn" data-color="#eab308" style="background:#eab308" aria-label="Yellow"></button>
              <button class="colorBtn" data-color="#22c55e" style="background:#22c55e" aria-label="Green"></button>
              <button class="colorBtn" data-color="#3b82f6" style="background:#3b82f6" aria-label="Blue"></button>
              <button class="colorBtn" data-color="#a855f7" style="background:#a855f7" aria-label="Purple"></button>
              <button class="colorBtn" data-color="#0f172a" style="background:#0f172a" aria-label="Black"></button>
              <button class="colorBtn" data-color="#ffffff" style="background:#ffffff; border-color: rgba(15,23,42,0.2)" aria-label="White"></button>
            </div>

            <div class="toolRow" aria-label="Tools">
              <button class="btn secondary toolBtn" id="penBtn" type="button" aria-label="Pen" title="Pen">
                ‚úèÔ∏è
              </button>
              <button class="btn secondary toolBtn" id="brushBtn" type="button" aria-label="Brush" title="Brush">
                üñåÔ∏è
              </button>
              <button class="btn secondary toolBtn" id="eraserBtn" type="button" aria-label="Eraser" title="Eraser">üßº</button>
              <div class="sliderWrap" aria-label="Brush size">
                <span style="opacity:.75;">Size</span>
                <input id="size" type="range" min="6" max="52" step="1" value="22" />
              </div>
              <button class="btn" id="clearBtn" type="button" aria-label="Clear drawing" title="Clear">Clear</button>
            </div>
          </div>

          <div class="canvasWrap" aria-label="Coloring canvas">
            <canvas id="c"></canvas>
          </div>

          <p class="hint">Pick a picture, then color it in!</p>
        </div>
      </div>
    </div>

    <audio id="bgMusic" preload="auto">
      <source src="../../assets/music.mp3" type="audio/mpeg" />
    </audio>

    <script src="./coloring.js" defer></script>
  </body>
</html>
